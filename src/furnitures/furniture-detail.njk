---
layout: layout.njk
permalink: "/furniture/{{product.category}}/{{ product.slug }}/"
pagination:
  data: products.products
  size: 1
  alias: product
---

<style>
@media(min-width:926px){
    .custom-navbar {
        background:rgba(0, 0, 0, 0.8);
        transition: background-color 0.3s ease-in-out;
    }
}

:root {
    --primary-color: #2c3e50;
    --secondary-color: #95a5a6;
    --accent-color: #e74c3c;
    --light-gray: #f8f9fa;
    --dark-gray: #343a40;
    --text-muted: #6c757d;
    --success-color: #28a745;
    --warning-color: #ffc107;
}

/* Back Button */
.back-section {
    padding: 15px 0;
}

.back-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted);
    text-decoration: none;
    font-size: 14px;
    transition: color 0.3s ease;
}

.back-btn:hover {
    color: var(--primary-color);
    text-decoration: none;
}

/* Breadcrumb */
.breadcrumb {
    background: none;
    padding: 1rem 0;
    font-size: 0.85rem;
    margin-bottom: 0;
    flex-wrap: wrap;
}

@media (min-width: 768px) {
    .breadcrumb {
        font-size: 0.9rem;
    }
}

.breadcrumb-item + .breadcrumb-item::before {
    content: ">";
    color: var(--text-muted);
    margin: 0 0.5rem;
}

.breadcrumb-item a {
    color: var(--text-muted);
    text-decoration: none;
    word-break: break-word;
}

.breadcrumb-item.active {
    color: var(--primary-color);
}

/* Product Images */
.product-images {
    position: relative;
    margin-bottom: 2rem;
}

@media (min-width: 992px) {
    .product-images {
        margin-bottom: 0;
    }
}

.main-image {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 8px;
    background: var(--light-gray);
}

@media (min-width: 576px) {
    .main-image {
        height: 350px;
        border-radius: 10px;
    }
}

@media (min-width: 768px) {
    .main-image {
        height: 400px;
    }
}

@media (min-width: 992px) {
    .main-image {
        height: 450px;
        border-radius: 12px;
    }
}

@media (min-width: 1200px) {
    .main-image {
        height: 500px;
    }
}

.image-gallery {
    display: flex;
    gap: 8px;
    overflow-x: auto;
    padding-bottom: 10px;
    scrollbar-width: thin;
}

@media (min-width: 576px) {
    .image-gallery {
        gap: 12px;
    }
}

.image-gallery::-webkit-scrollbar {
    height: 4px;
}

.image-gallery::-webkit-scrollbar-track {
    background: var(--light-gray);
    border-radius: 2px;
}

.image-gallery::-webkit-scrollbar-thumb {
    background: var(--secondary-color);
    border-radius: 2px;
}

.gallery-thumb {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
    border: 2px solid transparent;
}

@media (min-width: 576px) {
    .gallery-thumb {
        width: 70px;
        height: 70px;
        border-radius: 8px;
    }
}

@media (min-width: 768px) {
    .gallery-thumb {
        width: 80px;
        height: 80px;
    }
}

.gallery-thumb:hover {
    opacity: 0.8;
    transform: scale(1.05);
}

.gallery-thumb.active {
    border-color: var(--primary-color);
}



/* Product Info */
.product-info {
    padding: 10px 0;
}

@media (min-width: 768px) {
    .product-info {
        padding: 20px 0;
    }
}

.product-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 15px;
    line-height: 1.3;
}

@media (min-width: 576px) {
    .product-title {
        font-size: 1.75rem;
        margin-bottom: 20px;
    }
}

@media (min-width: 768px) {
    .product-title {
        font-size: 2rem;
    }
}

.product-price {
    font-size: 1.25rem;
    color: var(--text-muted);
    margin-bottom: 20px;
    font-weight: 600;
}

@media (min-width: 576px) {
    .product-price {
        font-size: 1.5rem;
        margin-bottom: 25px;
    }
}

@media (min-width: 768px) {
    .product-price {
        margin-bottom: 30px;
    }
}

/* Color Selection */
.color-section {
    margin-bottom: 20px;
}

@media (min-width: 768px) {
    .color-section {
        margin-bottom: 30px;
    }
}

.color-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--primary-color);
    margin-bottom: 10px;
    display: block;
}

@media (min-width: 768px) {
    .color-label {
        font-size: 0.9rem;
        margin-bottom: 12px;
    }
}

.color-options {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

@media (min-width: 576px) {
    .color-options {
        gap: 10px;
    }
}

.color-option {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: 2px solid #fff;
    box-shadow: 0 0 0 1px #ddd;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

@media (min-width: 576px) {
    .color-option {
        width: 32px;
        height: 32px;
    }
}

.color-option:hover,
.color-option.active {
    box-shadow: 0 0 0 2px var(--primary-color);
    transform: scale(1.1);
}

/* Quantity Section */
.quantity-section {
    margin-bottom: 20px;
}

@media (min-width: 768px) {
    .quantity-section {
        margin-bottom: 30px;
    }
}

.quantity-row {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

@media (min-width: 576px) {
    .quantity-row {
        gap: 20px;
        flex-wrap: nowrap;
    }
}

.quantity-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--primary-color);
    margin-bottom: 5px;
}

@media (min-width: 576px) {
    .quantity-label {
        margin-bottom: 0;
    }
}

@media (min-width: 768px) {
    .quantity-label {
        font-size: 0.9rem;
    }
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 0;
    border: 1px solid #ddd;
    border-radius: 6px;
    overflow: hidden;
}

@media (min-width: 768px) {
    .quantity-controls {
        border-radius: 8px;
    }
}

.quantity-btn {
    background: white;
    border: none;
    width: 35px;
    height: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
    color: var(--text-muted);
    transition: background-color 0.3s ease;
}

@media (min-width: 576px) {
    .quantity-btn {
        width: 40px;
        height: 40px;
        font-size: 18px;
    }
}

.quantity-btn:hover {
    background-color: var(--light-gray);
    color: var(--primary-color);
}

.quantity-input {
    width: 50px;
    height: 35px;
    border: none;
    text-align: center;
    font-size: 14px;
    font-weight: 600;
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
}

@media (min-width: 576px) {
    .quantity-input {
        width: 60px;
        height: 40px;
        font-size: 16px;
    }
}

.quantity-input:focus {
    outline: none;
}

.delivery-info {
    background: #e8f5e8;
    color: #2d5a2d;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 0.75rem;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    white-space: nowrap;
}

@media (min-width: 576px) {
    .delivery-info {
        padding: 8px 16px;
        font-size: 0.875rem;
        gap: 6px;
    }
}

/* Action Buttons */
.action-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    flex-direction: column;
}

@media (min-width: 576px) {
    .action-buttons {
        flex-direction: row;
        gap: 15px;
        margin-bottom: 25px;
    }
}

@media (min-width: 768px) {
    .action-buttons {
        margin-bottom: 30px;
    }
}

.btn {
    padding: 12px 20px;
    border: none;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex: 1;
    min-height: 48px;
}

@media (min-width: 576px) {
    .btn {
        padding: 14px 25px;
        border-radius: 8px;
        font-size: 1rem;
    }
}

@media (min-width: 768px) {
    .btn {
        padding: 15px 30px;
    }
}

.btn-add-cart {
    background: var(--secondary-color);
    color: white;
}

.btn-add-cart:hover {
    background: #7f8c8d;
    color: white;
}

.btn-buy-now {
    background: var(--dark-gray);
    color: white;
}

.btn-buy-now:hover {
    background: #23272b;
    color: white;
}

/* Payment Options */
.payment-section {
    margin-bottom: 20px;
}

@media (min-width: 768px) {
    .payment-section {
        margin-bottom: 30px;
    }
}

.payment-option {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
    padding: 12px;
    background: var(--light-gray);
    border-radius: 6px;
    flex-wrap: wrap;
}

@media (min-width: 576px) {
    .payment-option {
        gap: 15px;
        margin-bottom: 15px;
        padding: 15px;
        border-radius: 8px;
        flex-wrap: nowrap;
    }
}

.payment-option:last-child {
    margin-bottom: 0;
}

.payment-logo {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: lowercase;
    white-space: nowrap;
}

@media (min-width: 576px) {
    .payment-logo {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 0.875rem;
    }
}

.payment-logo.tabby {
    background: var(--success-color);
    color: white;
}

.payment-logo.tamara {
    background: var(--warning-color);
    color: var(--dark-gray);
}

.payment-text {
    font-size: 0.75rem;
    color: var(--text-muted);
    flex: 1;
}

@media (min-width: 576px) {
    .payment-text {
        font-size: 0.875rem;
    }
}

.payment-text strong {
    color: var(--dark-gray);
}

.payment-link {
    color: var(--primary-color);
    text-decoration: none;
    white-space: nowrap;
}

.payment-link:hover {
    text-decoration: underline;
}

/* Product Description */
.product-description {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #eee;
}

@media (min-width: 768px) {
    .product-description {
        margin-top: 30px;
        padding-top: 30px;
    }
}

.product-description p {
    margin-bottom: 12px;
    line-height: 1.6;
    color: var(--text-muted);
    font-size: 0.9rem;
}

@media (min-width: 576px) {
    .product-description p {
        margin-bottom: 15px;
        font-size: 1rem;
    }
}

/* Bootstrap 5.3 responsive overrides */
@media (max-width: 575.98px) {
    .container {
        padding-left: 15px;
        padding-right: 15px;
    }
}

/* Custom responsive spacing */
.spacing-xs {
    margin-bottom: 1rem;
}

.spacing-sm {
    margin-bottom: 1.5rem;
}

.spacing-md {
    margin-bottom: 2rem;
}

.spacing-lg {
    margin-bottom: 2.5rem;
}

/* Touch friendly improvements for mobile */
@media (max-width: 767.98px) {
    .btn, .quantity-btn, .color-option {
        min-height: 44px;
        min-width: 44px;
    }
    
    .gallery-thumb {
        min-width: 60px;
        min-height: 60px;
    }
}

/* High DPI displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .main-image, .gallery-thumb {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
    }
}
.color-option-img {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 6px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: transform 0.3s ease, border-color 0.3s ease;
    flex-shrink: 0;
}
.color-option-img:hover,
.color-option-img.active {
    transform: scale(1.05);
    border-color: var(--primary-color);
}

.whatsapp-btn {
            background: #25d366;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
            width: 100%;
            margin-bottom: 1rem;
        }

        .whatsapp-btn:hover {
            background: #1db954;
        }
</style>

<div class="container custom-padding">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="d-none d-sm-block">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <li class="breadcrumb-item"> <a href="/furniture/" style="pointer-events: none; text-decoration: none; cursor: default;">Furniture</a></li>
            <li class="breadcrumb-item"><a href="/furniture/{{product.category}}/">{{product.category}}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
        </ol>
    </nav>

    <!-- Mobile breadcrumb alternative -->
    <div class="d-block d-sm-none mb-3">
        <a href="/furniture/" class="back-btn">
            <i class="fas fa-arrow-left"></i>
            Back to Furniture
        </a>
    </div>

    <!-- Product Detail -->
    <div class="row g-3 g-lg-5">
        <!-- Product Images -->
        <div class="col-12 col-lg-6">
            <div class="product-images">
                <div class="main-image-container position-relative">
                    <img id="mainImage" 
                         src="{{ product.colorOptions[0].gallery[0] }}" 
                         alt="{{ product.name }}" 
                         class="main-image img-fluid">
                    <button class="zoom-icon" aria-label="Zoom image">
                        <i class="fas fa-search-plus"></i>
                    </button>
                </div>
                <div class="image-gallery mt-3">
                    {% for galleryImage in product.colorOptions[0].gallery %}
                    <img src="{{ galleryImage }}" 
                         alt="{{ product.name }} - Image {{ loop.index }}" 
                         class="gallery-thumb {% if loop.first %}active{% endif %}" 
                         loading="lazy" />
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Product Info -->
        <div class="col-12 col-lg-6">
            <div class="product-info">
                <h1 class="product-title">{{ product.name }}</h1>
                <div class="product-price">{{ product.currency }} {{ product.price }}</div>

                <!-- Color Selection -->
        <div class="color-section">
    <label class="color-label">Color: <span id="selectedColor">{{ product.color }}</span></label>
    <div class="color-options">
        {% for colorOption in product.colorOptions %}
        <img src="{{ colorOption.image }}"
             alt="{{ colorOption.name }}"
             class="color-option-img{% if loop.first %} active{% endif %}"
             data-color="{{ colorOption.name }}"
             data-image="{{ colorOption.image }}"
             data-gallery='{{ colorOption.gallery | dump | escape }}'
             loading="lazy"
             role="button"
             tabindex="0"
             aria-label="Select {{ colorOption.name }} color" />
        {% endfor %}
    </div>
</div>

                <!-- Quantity
                <div class="quantity-section">
                    <div class="quantity-row">
                        <div class="d-flex flex-column flex-sm-row align-items-start align-items-sm-center gap-2 gap-sm-3 w-100">
                            <label class="quantity-label">Quantity:</label>
                            <div class="quantity-controls">
                                <button class="quantity-btn quantity-decrease" aria-label="Decrease quantity">-</button>
                                <input type="number" 
                                       class="quantity-input" 
                                       value="1" 
                                       min="1" 
                                       readonly 
                                       aria-label="Product quantity">
                                <button class="quantity-btn quantity-increase" aria-label="Increase quantity">+</button>
                            </div>
                            <div class="delivery-info ms-auto ms-sm-0">
                                <i class="fas fa-truck"></i>
                                <span>{{ product.deliveryDays }} days</span>
                            </div>
                        </div>
                    </div>
                </div> -->
                
                
                <!-- Action Buttons -->
                <div class="action-buttons">
                    <!-- <button class="btn btn-add-cart">
                        <i class="fas fa-shopping-cart me-2 d-none d-sm-inline"></i>
                        Add to cart
                    </button>
                    <button class="btn btn-buy-now">
                        <i class="fas fa-bolt me-2 d-none d-sm-inline"></i>
                        Buy it now
                    </button> -->
                    <button class="whatsapp-btn">
                        <i class="fab fa-whatsapp"></i> Continue on WhatsApp
                    </button>
                </div>

                <!-- Payment Options -->
                <div class="payment-section">
                    <div class="payment-option">
                        <div class="payment-logo tabby">tabby</div>
                        <div class="payment-text">
                            As low as <strong>৳ {{ product.monthlyPayment }}/month</strong> or 4 interest-free payments. 
                            <a href="#" class="payment-link">More options</a>
                        </div>
                    </div>
                    <div class="payment-option">
                        <div class="payment-logo tamara">tamara</div>
                        <div class="payment-text">
                            Or split in 4 payments of <strong>৳ {{ product.installmentPayment }}</strong> - No late fees. Sharia compliant! 
                            <a href="#" class="payment-link">More options</a>
                        </div>
                    </div>
                </div>

                <!-- Product Description -->
                <div class="product-description">
                    <p>{{ product.description }}</p>
                    <p>{{ product.features }}</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Quantity controls
            // WhatsApp button functionality
        document.querySelector('.whatsapp-btn')?.addEventListener('click', function () {
            const packageName = document.querySelector('.product-title')?.textContent?.trim() || '';
            const color = document.getElementById('selectedColor')?.textContent?.trim() || '';
            const quantity = document.querySelector('.quantity-input')?.value?.trim() || '1';

            const message = `Hi! I'm interested in the ${packageName}.
            Color: ${color}
            Quantity: ${quantity}

            Could you please provide more details?`;

                const whatsappUrl = `https://wa.me/971XXXXXXXXX?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            });

    document.querySelectorAll('.quantity-decrease').forEach(btn => {
        btn.onclick = () => {
            const input = btn.nextElementSibling;
            if (parseInt(input.value) > 1) {
                input.value = parseInt(input.value) - 1;
            }
        };
    });

    document.querySelectorAll('.quantity-increase').forEach(btn => {
        btn.onclick = () => {
            const input = btn.previousElementSibling;
            input.value = parseInt(input.value) + 1;
        };
    });

    // Gallery thumbnails
    document.querySelectorAll('.gallery-thumb').forEach(thumb => {
        thumb.onclick = () => {
            const mainImage = document.getElementById('mainImage');
            mainImage.src = thumb.src;
            
            // Update active state
            document.querySelectorAll('.gallery-thumb').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
        };
    });

    document.querySelectorAll('.color-option-img').forEach(opt => {
        const handleSelection = () => {
            // Remove active from all
            opt.parentNode.querySelectorAll('.color-option-img').forEach(o => o.classList.remove('active'));
            opt.classList.add('active');

            // Update selected color text
            const selectedColorSpan = document.getElementById('selectedColor');
            if (selectedColorSpan) {
                selectedColorSpan.textContent = opt.getAttribute('data-color');
            }

            // Parse gallery
            const galleryData = JSON.parse(opt.getAttribute('data-gallery') || '[]');
            const mainImage = document.getElementById('mainImage');
            const galleryContainer = document.querySelector('.image-gallery');

            if (galleryData.length > 0) {
                // Update main image
                mainImage.src = galleryData[0];

                // Clear old gallery
                galleryContainer.innerHTML = '';

                // Build new gallery
                galleryData.forEach((url, index) => {
                    const thumb = document.createElement('img');
                    thumb.src = url;
                    thumb.className = 'gallery-thumb' + (index === 0 ? ' active' : '');
                    thumb.alt = `${opt.getAttribute('data-color')} - Image ${index + 1}`;
                    thumb.loading = 'lazy';

                    thumb.onclick = () => {
                        document.querySelectorAll('.gallery-thumb').forEach(t => t.classList.remove('active'));
                        thumb.classList.add('active');
                        mainImage.src = url;
                    };

                    galleryContainer.appendChild(thumb);
                });
            }
        };

        opt.onclick = handleSelection;
        opt.onkeypress = e => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                handleSelection();
            }
        };
    });



    document.querySelector('.zoom-icon')?.addEventListener('click', function () {
        const image = document.getElementById('mainImage');
        if (image && image.src) {
            window.open(image.src, '_blank');
        }
    });

    // Add to cart functionality (placeholder)
    document.querySelector('.btn-add-cart')?.addEventListener('click', function() {
        // Add cart functionality here
        console.log('Add to cart clicked');
    });

    // Buy now functionality (placeholder)
    document.querySelector('.btn-buy-now')?.addEventListener('click', function() {
        // Add buy now functionality here
        console.log('Buy now clicked');
    });

    // Handle responsive image gallery scrolling
    const gallery = document.querySelector('.image-gallery');
    if (gallery) {
        let isDown = false;
        let startX;
        let scrollLeft;

        gallery.addEventListener('mousedown', (e) => {
            isDown = true;
            gallery.classList.add('active');
            startX = e.pageX - gallery.offsetLeft;
            scrollLeft = gallery.scrollLeft;
        });

        gallery.addEventListener('mouseleave', () => {
            isDown = false;
            gallery.classList.remove('active');
        });

        gallery.addEventListener('mouseup', () => {
            isDown = false;
            gallery.classList.remove('active');
        });

        gallery.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - gallery.offsetLeft;
            const walk = (x - startX) * 2;
            gallery.scrollLeft = scrollLeft - walk;
        });
    }
});


</script>